@import url('https://fonts.googleapis.com/css2?family=DM+Sans:opsz,wght@9..40,400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --font-sans: 'DM Sans', sans-serif;
  --font-serif: 'Playfair Display', serif;

  /* Neo-Brutalist Theme - Off-white background, high contrast */
  --background: 48 30% 96%;
  /* #FDFCF8-ish */
  --foreground: 0 0% 0%;

  --card: 0 0% 100%;
  --card-foreground: 0 0% 0%;

  --popover: 0 0% 100%;
  --popover-foreground: 0 0% 0%;

  /* Primary - Vibrant Purple */
  --primary: 262 83% 65%;
  --primary-foreground: 0 0% 100%;

  /* Secondary - Clean White */
  --secondary: 0 0% 100%;
  --secondary-foreground: 0 0% 0%;

  --muted: 0 0% 90%;
  --muted-foreground: 0 0% 40%;

  --accent: 262 83% 65%;
  --accent-foreground: 0 0% 100%;

  --destructive: 0 84% 60%;
  --destructive-foreground: 0 0% 100%;

  --border: 0 0% 0%;
  --input: 0 0% 100%;
  --ring: 262 83% 65%;

  --radius: 0.5rem;
}

.dark {
  /* Dark mode also neo-brutalist but inverted */
  --background: 0 0% 5%;
  --foreground: 0 0% 100%;

  --card: 0 0% 10%;
  --card-foreground: 0 0% 100%;

  --popover: 0 0% 10%;
  --popover-foreground: 0 0% 100%;

  --primary: 262 83% 65%;
  --primary-foreground: 0 0% 100%;

  --secondary: 0 0% 15%;
  --secondary-foreground: 0 0% 100%;

  --muted: 0 0% 20%;
  --muted-foreground: 0 0% 70%;

  --accent: 262 83% 65%;
  --accent-foreground: 0 0% 100%;

  --destructive: 0 62% 30%;
  --destructive-foreground: 0 0% 100%;

  --border: 0 0% 100%;
  --input: 0 0% 15%;
  --ring: 262 83% 65%;
}

@layer base {
  body {
    @apply bg-background text-foreground antialiased;
    font-family: var(--font-sans);
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: var(--font-serif);
    @apply font-bold tracking-tight;
  }
}

@layer components {
  .neo-border {
    @apply border-2 border-black dark:border-white;
  }

  .neo-shadow {
    @apply shadow-[4px_4px_0px_0px_rgba(0, 0, 0, 1)] dark:shadow-[4px_4px_0px_0px_rgba(255, 255, 255, 1)];
  }

  .neo-shadow-lg {
    @apply shadow-[6px_6px_0px_0px_rgba(0, 0, 0, 1)] dark:shadow-[6px_6px_0px_0px_rgba(255, 255, 255, 1)];
  }

  .neo-card {
    @apply neo-border neo-shadow bg-card p-4 rounded-xl;
  }
}

/* React Flow NodeResizer â€“ handles & lines sit OUTSIDE the node */
.react-flow__resize-control.line {
  border-width: 1.5px !important;
}

.react-flow__resize-control.handle {
  z-index: 10;
}

/* Kubernetes Status Animations */
@keyframes k8s-pulse {
  0% {
    transform: scale(1);
    opacity: 0.8;
  }

  50% {
    transform: scale(1.5);
    opacity: 0;
  }

  100% {
    transform: scale(1);
    opacity: 0;
  }
}

.k8s-status-pulse {
  position: absolute;
  inset: -2px;
  border-radius: inherit;
  background-color: inherit;
  animation: k8s-pulse 2s cubic-bezier(0, 0, 0.2, 1) infinite;
  pointer-events: none;
}

/* Ensure node content clips inside its boundary */
.react-flow__node {
  overflow: visible !important;
}

/* Custom Cursors Library */
[data-cursor="select"] .react-flow__pane,
[data-cursor="select"] .react-flow__node,
[data-cursor="select"] .react-flow__node *,
[data-cursor="select"] .react-flow__handle,
[data-cursor="select"] .react-flow__edge {
  cursor: url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5.5 3.5L18.5 13.5L12 14.5L14 20.5L11.5 21.5L9.5 15.5L5.5 19V3.5Z' fill='white' stroke='black' stroke-width='1.5' stroke-linejoin='round'/%3E%3C/svg%3E") 6 4, auto !important;
}

[data-cursor="annotation"] .react-flow__pane,
[data-cursor="annotation"] .react-flow__node,
[data-cursor="annotation"] .react-flow__node *,
[data-cursor="annotation"] .react-flow__handle,
[data-cursor="annotation"] .react-flow__edge {
  cursor: url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z' fill='white' stroke='black' stroke-width='1.5' stroke-linejoin='round'/%3E%3C/svg%3E") 2 22, auto !important;
}

[data-cursor="infrastructure"] .react-flow__pane,
[data-cursor="infrastructure"] .react-flow__node,
[data-cursor="infrastructure"] .react-flow__node *,
[data-cursor="infrastructure"] .react-flow__handle,
[data-cursor="infrastructure"] .react-flow__edge {
  cursor: crosshair !important;
}

/* Allow inputs and textareas to keep their text cursor */
[data-cursor] textarea,
[data-cursor] input,
[data-cursor] button,
[data-cursor] [role="button"],
[data-cursor] .react-flow__resize-control {
  cursor: auto !important;
}

.react-flow__pane:active {
  cursor: grabbing !important;
}

[data-cursor="annotation"] .react-flow__pane:active {
  cursor: url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z' fill='white' stroke='black' stroke-width='1.5' stroke-linejoin='round'/%3E%3C/svg%3E") 2 22, auto !important;
}